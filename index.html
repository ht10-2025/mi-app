<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You ğŸŒ·</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  height: 100vh;
  background-size: cover;
  background-position: center;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

.overlay {
  position: absolute;
  inset: 0;
  background: rgba(255,240,246,0.9);
}

.card {
  position: relative;
  background: white;
  border-radius: 30px;
  padding: 28px;
  width: 90%;
  max-width: 390px;
  text-align: center;
  box-shadow: 0 20px 45px rgba(0,0,0,0.25);
  z-index: 2;
  animation: fadeUp 1.2s;
}

h2 { color: #ff5fa2; }
p { color: #555; }

input, button {
  width: 100%;
  padding: 12px;
  margin-top: 12px;
  border-radius: 18px;
  border: none;
  font-size: 16px;
}

input { background: #fff0f6; }

button {
  background: #ff6fa5;
  color: white;
  cursor: pointer;
}

button.special {
  background: linear-gradient(135deg, #ff6fa5, #ff9ac8);
  animation: pulse 1.4s infinite;
}

.hidden { display: none; }

/* Flotantes */
.float {
  position: absolute;
  bottom: -20px;
  animation: float 6s infinite;
  opacity: 0.7;
}

@keyframes float {
  from { transform: translateY(0); opacity: 0.7; }
  to { transform: translateY(-120vh); opacity: 0; }
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(25px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(255,111,165,0.6); }
  70% { box-shadow: 0 0 0 16px rgba(255,111,165,0); }
  100% { box-shadow: 0 0 0 0 rgba(255,111,165,0); }
}

.nombre-letra {
  display: inline-block;
  opacity: 0;
  transform: translateY(20px) scale(0.8);
  animation: letraBounce 0.65s forwards;
  color: #ff5fa2;
  font-weight: 600;
  text-shadow: 0 0 8px rgba(255,95,162,0.45);
}

@keyframes letraBounce {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  60% {
    opacity: 1;
    transform: translateY(-5px) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.encabezado-animado {
  display: inline-block;
  opacity: 0;
  transform: translateY(30px) scale(0.8);
  animation: encabezadoBounce 0.8s forwards;
  margin-right: 2px; /* espacio entre letras/emojis */
}

@keyframes encabezadoBounce {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.8);
  }
  50% {
    opacity: 1;
    transform: translateY(-8px) scale(1.1);
  }
  80% {
    transform: translateY(2px) scale(1);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
</style>
</head>

<body>

<div class="overlay"></div>

<div class="card">
  <!-- PASO 1 -->
  <div id="step1">
    <h2 id="step1-h2"></h2>
    <p>Escribe tu nombre ğŸŒ·</p>
    <input id="nombre" placeholder="Escribe tu nombre aqui"/>
    <button onclick="continuar()">Continuar âœ¨</button>
  </div>

  <!-- PASO 2 -->
  <div id="step2" class="hidden">
    <h2 id="saludo"><span id="nombreAnimado"></span></h2>
    <p>Â¿CÃ³mo te sientes hoy?</p>
    <button onclick="responder('bien')">ğŸ˜œ Muy bien</button>
    <button onclick="responder('normal')">ğŸ˜Š Tranquila</button>
    <button onclick="responder('cansada')">ğŸ’­ Cansada</button>
  </div>

  <!-- PASO 3 -->
  <div id="step3" class="hidden">
    <h2 id="step3-h2"></h2>
    <p id="mensaje"></p>
    <button id="btnExtra" class="hidden" onclick="pantallaExtra()">ğŸ’Œ Ver algo especial</button>
    <button onclick="toggleMusic()">ğŸµ MÃºsica</button>
    <button id="btnReiniciarStep3" class="hidden" onclick="reiniciar()">ğŸ” Volver a empezar</button>
  </div>

  <!-- PASO 4 -->
  <div id="step4" class="hidden">
    <h2 id="step4-h2"></h2>
    <p id="mensajeEspecial"></p>
    <button id="btnExtra1" class="hidden" onclick="pantallaExtra1()">ğŸ’Œ Ver otro algo especial</button>
    <button onclick="toggleMusic()">ğŸµ MÃºsica</button>
  </div>

  <!-- PASO 5 -->
  <div id="step5" class="hidden">
    <h2 id="step5-h2"></h2>
    <p id="mensajeEspecial1"></p>
    <button onclick="toggleMusic()">ğŸµ MÃºsica</button>
    <button onclick="reiniciar()">ğŸ” Volver a empezar</button>
  </div>
</div>

<audio id="musica" loop>

</audio>

<script>
let nombre="", tipo="";
const musica = document.getElementById("musica");

// Animaciones iniciales
animarEncabezado("step1-h2", "ğŸ¤— Bienvenida ğŸ¤—", 100);

function hora() {
  const h = new Date().getHours();
  if (h < 12) return "esta maÃ±ana";
  if (h < 18) return "esta tarde";
  return "esta noche";
}

function setMusicaPorTipo(tipo) {
  musica.pause();
  musica.currentTime = 0;

  let src = "";

  if (tipo === "A") src = "musicaA.mp3";
  else if (tipo === "B") src = "musicaB.mp3";
  else if (tipo === "C") src = "musicaC.mp3";
  else src = "musicaDefault.mp3";

  musica.src = src;
  musica.load();
}

function toggleMusic() { musica.paused ? musica.play() : musica.pause(); }


function continuar() {
  nombre = document.getElementById("nombre").value.trim();
  if (!nombre) return;

  const n = nombre.toLowerCase();
  if (n === "bella julissa") tipo = "A";
  else if (n === "danika") tipo = "B";
  else if (n === "tatiana") tipo = "C";
  else tipo = "OTRO";

  setMusicaPorTipo(tipo);
  musica.play();

  document.getElementById("step1").classList.add("hidden");

  if (tipo === "OTRO") {
  document.body.style.backgroundImage = "url('fondoDefault.jpg')";
  document.getElementById("step3").classList.remove("hidden");


  const durEncabezado = animarEncabezado("step3-h2", "âœ¨ Para Ti âœ¨");

  setTimeout(() => {
    const mensajeEl = document.getElementById("mensaje");
    mensajeEl.innerHTML = ""; // Limpiar contenido

    // LÃ­nea 1: Mucho gusto, [nombre] ğŸ––
    const linea1 = document.createElement("div");
    linea1.id = "linea1";
    mensajeEl.appendChild(linea1);

    // Animar "Mucho gusto, "
    escribirTextoInline(linea1, "Mucho gusto, ", 60, () => {
  const nombreSpan = document.createElement("span");
  nombreSpan.id = "nombrePaso3";
  linea1.appendChild(nombreSpan);

  const emojiSpan = document.createElement("span");
  emojiSpan.textContent = " ğŸ––";
  linea1.appendChild(emojiSpan);

  animarNombre("nombrePaso3", nombre);
  // DespuÃ©s del nombre â†’ lÃ­neas 2 y 3
  const durNombre = nombre.length * 240 + 750;

  setTimeout(() => {
    const mensajeLineas = document.createElement("div");
    mensajeLineas.id = "mensajeLinea2";
    mensajeLineas.style.lineHeight = "1.8em";
    mensajeEl.appendChild(mensajeLineas);

    escribirTexto(
      "mensajeLinea2",
      "Espero te encuentres bien ğŸ«¡\nQue tengas un bonito dÃ­a âœ¨",
      50
    );
  }, durNombre);
});

  }, durEncabezado);

  document.getElementById("btnReiniciarStep3").classList.remove("hidden");
  document.getElementById("btnExtra").classList.add("hidden");
  return;
}



  // Pasos A, B, C
  document.body.style.backgroundImage = "url('fondo" + tipo + ".jpg')";
  document.getElementById("step2").classList.remove("hidden");
  animarNombre("nombreAnimado", nombre + " ğŸŒ·");
  musica.play();
  flotantes(tipo === "A" ? "ğŸ’–" : "âœ¨", tipo === "A" ? 20 : 20);
}


function escribirTextoInline(el, texto, velocidad = 60, callback) {
  let i = 0;
  function escribir() {
    if (i < texto.length) {
      el.textContent += texto[i];
      i++;
      setTimeout(escribir, velocidad);
    } else if (callback) {
      callback();
    }
  }
  escribir();
}


// FunciÃ³n auxiliar para saltos de lÃ­nea animados
function escribirTextoConSaltos(contenedor, texto, velocidad = 50) {
  let i = 0;
  const plain = texto.replace(/\n/g, "\n");

  const interval = setInterval(() => {
    const char = plain[i];
    if (char === "\n") {
      contenedor.innerHTML += "<br>";
    } else {
      contenedor.innerHTML += char;
    }
    i++;
    if (i >= plain.length) clearInterval(interval);
  }, velocidad);
}



function responder(estado) {
  let texto = "";

  if (tipo === "A") {
    if (estado === "bien")
      texto = "Me alegra saber que te sientes muy bien ğŸ’–"+
              "Quiero decirte que contigo " +hora()+ " se vuelve mas bonita y especial ğŸ’•"+
              "Tu presencia hace que todo se sienta mejor! ğŸŒ·";
    else if (estado === "normal")
      texto = "Gracias por decirme que te sientes tranquila ğŸ’• Que este dia estÃ© lleno de calma y sonrisas para ti! ğŸŒ·";
    else
      texto = "Te mando un abrazo bonito ğŸ¤— Todo puede mejorar! âœŒï¸";

    document.getElementById("btnExtra").classList.remove("hidden");
    document.getElementById("btnExtra").classList.add("special");
    document.getElementById("btnReiniciarStep3").classList.add("hidden");
  }

  if (tipo === "B") {
    if (estado === "bien")
    texto = "Este mensaje es para ti ğŸŒ· Gracias por compartir cÃ³mo te sientes en este momento ğŸ¤— Que " +hora()+ " te regale alegrÃ­a y felicidad! ğŸ˜ƒ";
    else if (estado === "normal")
      texto = "Gracias por decirlo ğŸ’•La tranquilidad tambien es muy valiosa, asi como tÃº! ğŸŒ·";
    else
      texto = "TÃ³mate tu tiempo ğŸ¤— Todo pasa y lo bueno llega, ya lo verÃ¡s! âœŒï¸";

    document.getElementById("btnReiniciarStep3").classList.remove("hidden");
    document.getElementById("btnExtra").classList.add("hidden");
  }

  if (tipo === "C") {
    if (estado === "bien")
    texto = "Este mensaje es para ti ğŸŒ· Gracias por compartir cÃ³mo te sientes en este momento ğŸ¤— Que " +hora()+ " te regale alegria y felicidad! ğŸ˜ƒ";
    else if (estado === "normal")
      texto = "Esta bien sentirse asÃ­ ğŸ’• Disfruta los buenos momentos, con tranquilidad! ğŸŒ·";
    else
      texto = "Este mensaje es para ti ğŸ¤— No estas sola âœŒï¸";

    document.getElementById("btnReiniciarStep3").classList.remove("hidden");
    document.getElementById("btnExtra").classList.add("hidden");
  }

  document.getElementById("step2").classList.add("hidden");
  document.getElementById("step3").classList.remove("hidden");

  // Primero encabezado, luego texto
  const dur = animarEncabezado("step3-h2", "âœ¨ Sabes algo?... âœ¨");
  setTimeout(() => escribirTexto("mensaje", texto), dur);
}

function pantallaExtra() {
  document.getElementById("step3").classList.add("hidden");
  document.getElementById("step4").classList.remove("hidden");
  document.getElementById("btnExtra1").classList.remove("hidden");

  const dur = animarEncabezado("step4-h2", "ğŸ’– Solo para Ti ğŸ’•");
  setTimeout(() => {
    escribirTexto("mensajeEspecial",
      `Quiero que sepas algo ğŸ’–
       Este detalle existe porque pensÃ© en ti con mucho cariÃ±o ğŸŒ»ğŸŒ¼
       Gracias por ser como eres! ğŸ¤—`);
  }, dur);

  flotantes("ğŸ’«", 25);
}

function pantallaExtra1() {
  document.getElementById("step4").classList.add("hidden");
  document.getElementById("step5").classList.remove("hidden");

  const dur = animarEncabezado("step5-h2", "ğŸ’– Y ahora que te parece si... ğŸ’•");
  setTimeout(() => {
    escribirTexto("mensajeEspecial1",
      `Vamos por un helado?... ğŸ¦ 
       O prefieres que vayamos por una chela bien helena? Jeje ğŸ˜‰ 
       QuÃ© dices? Vamos!!! Salud, salud! ğŸ»
       ğŸ¤—ğŸ¤—ğŸ¤—`);
  }, dur);

  flotantes("ğŸ’«", 25);
}

// ---- FUNCIONES DE ANIMACIÃ“N ----

function escribirTexto(id, texto, velocidad = 80) {
  const el = document.getElementById(id);
  el.innerHTML = "";
  el.style.lineHeight = "1.8em"; // espaciado uniforme entre lÃ­neas

  const lineas = texto.split("\n"); // separamos el texto por saltos de lÃ­nea

  let lineaIndex = 0, charIndex = 0;

  function escribirLetra() {
    if (lineaIndex >= lineas.length) return;

    const linea = lineas[lineaIndex];

    // Creamos un div por lÃ­nea si no existe
    if (!el.children[lineaIndex]) {
      const div = document.createElement("div");
      el.appendChild(div);
    }

    // Agregamos la letra actual
    el.children[lineaIndex].textContent += linea[charIndex];
    charIndex++;

    if (charIndex >= linea.length) {
      lineaIndex++;
      charIndex = 0;
    }

    if (lineaIndex < lineas.length || charIndex < (lineas[lineaIndex]?.length || 0)) {
      setTimeout(escribirLetra, velocidad);
    }
  }

  escribirLetra();
}


function animarNombre(id, nombre) {
  const el = document.getElementById(id);
  el.innerHTML = "";
  [...nombre].forEach((letra, i) => {
    const span = document.createElement("span");
    span.className = "nombre-letra";
    span.style.animationDelay = (i * 0.14) + "s";
    span.textContent = letra === " " ? "\u00A0" : letra;
    el.appendChild(span);
  });
}

function animarEncabezado(id, texto) {
  const el = document.getElementById(id);
  el.innerHTML = "";
  const chars = Array.from(texto); // importante para emojis
  chars.forEach((char, i) => {
    const span = document.createElement("span");
    span.className = "encabezado-animado";
    span.textContent = char === " " ? "\u00A0" : char;
    span.style.animationDelay = `${i * 60}ms`;
    el.appendChild(span);
  });
  return chars.length * 60 + 800; // duraciÃ³n total
}

function flotantes(simbolo, cantidad) {
  for (let i = 0; i < cantidad; i++) {
    const f = document.createElement("div");
    f.className = "float";
    f.innerHTML = simbolo;
    f.style.left = Math.random() * 100 + "vw";
    f.style.fontSize = (14 + Math.random() * 20) + "px";
    f.style.animationDuration = (4 + Math.random() * 4) + "s";
    document.body.appendChild(f);
  }
}


function reiniciar() {
  nombre = "";
  tipo = "";
  musica.pause(); musica.currentTime = 0;
  document.getElementById("nombre").value = "";
  ["mensaje","mensajeEspecial","mensajeEspecial1"].forEach(id => document.getElementById(id).innerHTML = "");
  ["step2","step3","step4","step5"].forEach(id => document.getElementById(id).classList.add("hidden"));
  document.getElementById("step1").classList.remove("hidden");
  document.getElementById("btnExtra").classList.add("hidden"); document.getElementById("btnExtra").classList.remove("special");
  document.getElementById("btnExtra1").classList.add("hidden");
  document.body.style.backgroundImage = "";
  document.querySelectorAll(".float").forEach(e => e.remove());
}

</script>

</body>
</html>
